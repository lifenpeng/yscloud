<div class="container-fluid pub-application" style="padding: 0;min-height: 300px">
    <form name="control.form" class="form-horizontal proj_modify plan_preProd" ng-submit="submitReadyForm()" novalidate autocomplete="off" onKeyPress="if(event.keyCode==13) return false">
        <div class="form-group form-horizontal form-style">
            <div  class="col-sm-6">
                <div class="row row-distance">
                    <label class="col-sm-4 control-label label-key">应用系统</label>
                    <div class="col-sm-8" >
                        <bs-select width=200 name="business_sys_name"
                                   items="data.sys_list"
                                   my-select="info.pre_info.business_sys_name"
                                   select-val="loadPlusFormData(selectKey);"
                                   option-labal="business_cn_name"
                                   loading="control.get_business_loading"
                                   option-key="business_sys_name" required></bs-select>
                        <validate-msg tag-cn-name="应用系统" type="select" name="business_sys_name" model="info.pre_info.business_sys_name"></validate-msg>
                    </div>
                </div>
                <div class="row row-distance" >
                    <label class="col-sm-4 control-label label-key" >发布环境</label>
                    <div class="col-sm-8" >
                        <div ng-if="control.is_selected_busisys">
                            <bs-select name="env_name"
                                       width=200
                                       items="data.env_list"
                                       my-select="info.pre_info.environment_id"
                                       option-labal="environment_name"
                                       loading="control.prog_list_loading"
                                       option-key="environment_id" required></bs-select>
                            <validate-msg tag-cn-name="环境" type="select" name="env_name" model="info.pre_info.environment_id"></validate-msg>
                        </div>
                        <div ng-if="!control.is_selected_busisys" style="color: #6D7183;font-size: 12px;margin-top: 7px">请选择应用系统获取环境信息</div>
                    </div>
                </div>
                <div class="row row-distance">
                    <label class="col-sm-4 control-label label-key" >发布方案</label>
                    <div class="col-sm-8" >
                        <div ng-if="info.pre_info.environment_id">
                            <bs-select width=200 name="prog_name"
                                       items="data.program_list"
                                       my-select="info.pre_info.prog_id"
                                       select-val="selectProgram(selectKey)"
                                       option-labal="prog_cn_name"
                                       option-key="prog_id"
                                       loading="control.prog_list_loading"
                                       required></bs-select>
                            <validate-msg tag-cn-name="发布方案" type="select" name="prog_name" model="info.pre_info.prog_id"></validate-msg>
                        </div>
                        <div ng-if="!info.pre_info.environment_id" style="color: #6D7183;font-size: 12px;margin-top: 7px">请选择环境获取方案信息</div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="row row-distance">
                    <label class="col-sm-2 control-label label-key">项目编号</label>
                    <div class="col-sm-8" >
                        <bs-select name="project_name"
                                   items="data.project_list"
                                   my-select="info.pre_info.project_id"
                                   option-labal="project_name"
                                   option-key="project_id"
                                   empty-option="暂不选择"
                        >
                        </bs-select>
                    </div>
                </div>
                <div class="row row-distance" >
                    <label class="col-sm-2 control-label label-key">发布说明</label>
                    <div class="col-sm-8">
                         <textarea name="project_bk_desc"
                                   ng-model="info.apply_info.pjpublish_desc"
                                   class="form-control label-value"
                                   placeholder="发布说明（最多50个字）"
                                   style="min-width: 330px; resize:none;overflow:hidden;min-height: 65px;"
                                   ng-maxlength=50
                                   ng-model-options="{updateOn: 'blur'}">
                         </textarea>
                    </div>
                </div>
            </div>
        </div>
        <div ng-if="control.pre_info_loading" style="text-align: center;font-size: 16px;height: 60px;line-height: 60px;color: #44dcfd">
            正在获取方案准备信息 <span ><i class="fa fa-spinner fa-spin" style="color: #44dcfd;"></i></span>
        </div>
        <div ng-if="!control.pre_info_loading">
            <!--方案信息-->
            <div class="form-group" ng-if="info.pre_info.group_list.length != 0">
                <div class="col-sm-8 col-sm-offset-2" style="padding-right: 0;">
                    <div class="col-sm-12" style="background: #101923;padding-top: 5px;">
                        <div class="container-fluid" style="position: relative;" ng-if="info.pre_info.prog_id">
                            <!--方案信息-->
                            <div class="row phase-container"  ng-repeat="group in info.pre_info.group_list">
                                <div class="phase-module">
                                    <!--分组头样式-->
                                    <div class="phase-container-header">
                                        <div class="col-sm-1 group-phase-icon" title="{{group.group_type==1 ? '普通分组' : group.group_type==2 ? '串行分组' :'条件分组'}}" ng-class="group.group_type==1 ? 'common-group-icon' : group.group_type==2 ? 'series-group-icon' :'condition-group-icon' "></div>
                                        <div class="col-sm-4" style="padding-left: 10px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                                            <span ng-bind="group.group_name" title="{{group.group_name}}"></span>
                                        </div>
                                        <div style="position: relative;float: left;">
                                            <div class="group-exec-method" style="top: 4px;cursor: default">
                                                <div class="group-method-serial" ng-if="!group.parallel_flag">
                                                    串
                                                </div>
                                                <div class="group-method-serial" ng-if="group.parallel_flag">
                                                    并
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-2" style="padding-right: 5px;float: right;">
                                            <div class="togglebutton">
                                                <label style="font-size: 13px;">
                                                    <input type="checkbox" ng-model="group.expand_flag" ng-if="group.nav_show_flag == 0 || group.nav_show_flag == 1 " ng-click="expandCollapseAll(group)">
                                                    <input type="checkbox" ng-model="group.expand_flag" ng-if="group.nav_show_flag == 2" ng-click="colseCollapseAll(group)">
                                                    <span class="toggle" style="vertical-align: middle;margin-right: -2px;"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <!--条件分组发布包-->
                                    <div class="condition-group-pac" ng-if="group.group_type==3">
                                        <label class="checkbox-inline" ng-repeat="pac in group.temp_pac_type_list">
                                            <input type="checkbox" i-check name="pac_group" disabled  ng-model="pac.state">&nbsp;&nbsp;&nbsp;&nbsp;{{pac.type_name}}
                                        </label>
                                    </div>
                                    <!--分组阶段样式-->
                                    <div class="row" style="margin-top: 5px;padding-left: 10px">
                                        <div class="col-sm-12">
                                            <div class="row" ng-if="group.phase_list.length != 0">
                                                <div class="col-sm-12">
                                                    <div ng-repeat="step in group.phase_list"  class="cmpt-module">
                                                        <div style="padding-left: 15px;">
                                                            <div class="cmpt-module-content">
                                                                <div class="row cmpt-module-head" ng-class="step.show_detail ? 'cmpt-module-head-hover':''" ng-click="toggleModulesDetail(step, group)">
                                                                    <div class="col-sm-1" style="width: 20px;margin-right: 10px;">
                                                                        <div class="step-circle-common">
                                                                            <span class="step-circle-font">{{step.phase_no}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div style="position: absolute;left: 25px;">
                                                                        <span class="phase-type-img header-cmpt" ng-show="step.phase_type==1"></span>
                                                                        <span class="phase-type-img header-cmpt-check" ng-show="step.phase_type==2"></span>
                                                                        <span class="phase-type-img header-script" ng-show="step.phase_type==3"></span>
                                                                        <span class="phase-type-img header-solid-config" ng-show="step.phase_type==4"></span>
                                                                        <span class="phase-type-img header-custom-config" ng-show="step.phase_type==5"></span>
                                                                        <span class="phase-type-img header-handle-phase" ng-show="step.phase_type==6"></span>
                                                                    </div>
                                                                    <div class="col-sm-6" style="padding-left: 25px;">
                                                                        <span class="cmpt_font" title="{{step.phase_name}}" >{{step.phase_name}}</span>
                                                                    </div>
                                                                    <div style="float: right;">
                                                                        <div ng-if="step.interactor_flag" title="交互式" class="cmpt-exec-method cmpt-exec-method-interact"></div>
                                                                        <div ng-if="step.parallel_flag" title="并行" class="cmpt-exec-method cmpt-exec-method-parallel"></div>
                                                                        <span ng-if="step.impl_type == 1" class="exec-type ftp-color">FTP</span>
                                                                        <span ng-if="step.impl_type == 2" class="exec-type shell-color">SHELL</span>
                                                                        <span ng-if="step.impl_type == 3" class="exec-type was-color">WAS</span>
                                                                        <span ng-if="step.impl_type == 4" class="exec-type svn-color">SVN</span>
                                                                        <span ng-if="step.impl_type == 5" class="exec-type web-logic_color">WEBLOGIC</span>
                                                                        <span ng-if="step.impl_type == 6" class="exec-type jdbc-color">SQL</span>
                                                                        <span ng-if="step.impl_type == 7" class="exec-type python-color">PYTHON2</span>
                                                                        <span ng-if="step.impl_type == 8" class="exec-type python-color">PYTHON3</span>
                                                                        <span ng-if="step.impl_type == 11" class="exec-type python-color">BAT</span>
                                                                        <span ng-if="step.impl_type == 14" class="exec-type java-color">JAVA</span>
                                                                        <span ng-if="step.impl_type == 15" class="exec-type C-color">C/C++</span>
                                                                        <span ng-if="step.impl_type == 17" class="exec-type C-color">CUSTOM</span>
                                                                        <span ng-if="step.impl_type == 18" class="exec-type cl-color">AS400_CL</span>
                                                                        <span ng-if="step.impl_type == 19" class="exec-type bgm-color">AS400_BGM</span>
                                                                    </div>
                                                                </div>
                                                                <!--phase_type 1 组件 2 校验组件 3 脚本 4 固化配置 5自定义配置 6 人工阶段-->
                                                                <!-- 组件-->
                                                                <div ng-if="step.phase_type ==1 || step.phase_type == 2 ">
                                                                    <div collapse="!step.show_detail" class="content-border">
                                                                        <div class="form-style container-fluid">
                                                                            <div class="row" style="padding-top:20px;">
                                                                                <div class="col-sm-2" style="text-align: right;padding-right: 0px;">
                                                                                    <label class="label-key">描述</label>
                                                                                </div>
                                                                                <div class="col-sm-10 label-value" style="margin-top:2px">
                                                                                    {{step.bk_desc}}
                                                                                </div>
                                                                            </div>
                                                                            <div class="row" ng-if="step.impl_type == 15 || step.impl_type == 17"   style="margin-top: 18px;padding-right:20px;">
                                                                                <div class="col-sm-2" style="padding-right: 0px;text-align: right">
                                                                                    <label class="label-key">执行命令</label>
                                                                                </div>
                                                                                <div class="col-sm-10 label-value command-content">
                                                                                        <textarea
                                                                                                ui-codemirror="config.viewOptions"
                                                                                                ui-refresh="true"
                                                                                                placeholder="执行脚本"
                                                                                                ng-model="step.command.exec_script"
                                                                                        >
                                                                                        </textarea>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row" ng-if="step.impl_type != 15"  style="margin-top: 18px;padding-right:20px;">
                                                                                <div class="col-sm-2" style="padding-right: 0px;text-align: right">
                                                                                    <label class="label-key">执行脚本</label>
                                                                                </div>
                                                                                <div scroll-control class="col-sm-10 label-value code-script-content">
                                                                                        <textarea
                                                                                                ui-codemirror="config.viewOptions"
                                                                                                ui-refresh="control.code_refresh"
                                                                                                placeholder="执行脚本"
                                                                                                ng-model="step.exec_script"
                                                                                        >
                                                                                        </textarea>
                                                                                </div>
                                                                            </div>
                                                                            <!--参数列表-->
                                                                            <div class="row" style="padding-top: 10px;text-align: right;margin-top: 4px;margin-bottom: 6px;">
                                                                                <div class="col-sm-2" style="padding-left:0px;">
                                                                                    <label class="label-key">组件参数</label>
                                                                                </div>
                                                                                <div class="col-sm-10 label-value" id="param_table" style="padding-left:10px;padding-right:35px;margin-top: 2px">
                                                                                    <div ng-show="!step.ref_param_list" style="color: #999;cursor: default;text-align: left;">暂无引用参数列表</div>
                                                                                    <table  ng-show="step.ref_param_list" class="sub-table" tbl-Data="step.ref_param_list">
                                                                                        <thead>
                                                                                        <tr >
                                                                                            <td style="text-align: left">
                                                                                                <span>参数名</span>
                                                                                                <span><i style=" color: #FF6600; font-size: 10px;" class="fa fa-asterisk"></i></span>
                                                                                            </td>
                                                                                            <td style="text-align: left">
                                                                                                引用全局参数
                                                                                            </td>
                                                                                            <td style="text-align: left">
                                                                                                参数中文名
                                                                                            </td>
                                                                                        </tr>
                                                                                        </thead>
                                                                                        <tbody >
                                                                                        <tr ng-repeat="tr in step.ref_param_list" style="font-size: 12px;">
                                                                                            <td style="text-align: left;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;" ng-style="calculateWidth()" title="{{tr.param_name}}">{{tr.param_name}}</td>
                                                                                            <td style="text-align: left;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;" ng-style="calculateWidth()" title="{{tr.ref}}">{{tr.ref}}</td>
                                                                                            <td style="text-align: left;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;" ng-style="calculateWidth()" title="{{tr.param_cn_name}}">{{tr.param_cn_name ? tr.param_cn_name : '--'}}</td>
                                                                                        </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                            <!-- 数据源 -->
                                                                            <div class="row" style="margin-top: 10px;">
                                                                                <div class="col-sm-2 label-key" style="padding-left:0;">
                                                                                    <label >数据源</label>
                                                                                </div>
                                                                                <div class="col-sm-10 label-value" style="padding-left:0;padding-right:35px;">
                                                                                    <span>{{step.logical_node ? step.logical_node.logical_node_name : '--'}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- 脚本-->
                                                                <div ng-if="step.phase_type ==3">
                                                                    <div collapse="!step.show_detail" class="content-border">
                                                                        <div class=" container-fluid">
                                                                            <div class="row form-style" ng-if="step.impl_type == 15 || step.impl_type == 17" style="padding-right:20px;padding-top: 20px;">
                                                                                <div class="col-sm-2" style="text-align: right;padding-left:0px;">
                                                                                    <label class="label-key">执行命令</label>
                                                                                </div>
                                                                                <div class="col-sm-10 command-content">
                                                                                        <textarea name="subgroup_exec_script" disabled ui-codemirror="config.viewOptions" ui-refresh="control.code_refresh" ng-model="step.command.exec_script" class="form-control" placeholder="执行脚本" style="resize:none;">
                                                                                </textarea>
                                                                                </div>
                                                                            </div>
                                                                            <div ng-if="step.impl_type != 15" class="row form-style" style="padding-right:20px;padding-top: 20px;">
                                                                                <div class="col-sm-2" style="text-align: right;padding-left:0px;">
                                                                                    <label class="label-key">执行脚本</label>
                                                                                </div>
                                                                                <div scroll-control class="col-sm-10 code-script-content" >
                                                                                          <textarea name="subgroup_exec_script" disabled ui-codemirror="config.viewOptions" ui-refresh="control.code_refresh" ng-model="step.exec_script" class="form-control" placeholder="执行脚本" style="resize:none;">
                                                                                            </textarea>
                                                                                </div>
                                                                            </div>
                                                                            <!--数据源-->
                                                                            <div class="row form-style" style="margin-top: 10px;">
                                                                                <div class="col-sm-2 label-key" style="padding-left:0;">
                                                                                    <label >执行节点</label>
                                                                                </div>
                                                                                <div class="col-sm-10 label-value" style="padding-left:0px;padding-right:35px;">
                                                                                    <span>{{step.logical_node ? step.logical_node.logical_node_name : '--'}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!--固化配置-->
                                                                <div ng-if="step.phase_type == 4">
                                                                    <div collapse="!step.show_detail" class="content-border">
                                                                        <div style="padding: 20px 20px 5px">
                                                                            <div ng-if="step.logical_node">
                                                                                <div class="phase-soc-title">
                                                            <span class="soc-detail">
                                                                <span class="soc-proto" title="{{step.logical_node.logical_node_name}}">{{step.logical_node.logical_node_name}}</span>
                                                            </span>
                                                                                </div>
                                                                                <div class="config-files-list">
                                                                                    <div class="file-list" ng-repeat="file in step.logical_node.file_list" title="{{file}}">
                                                                                        <i class="fa fa-file-text-o"></i> {{file.substring(file.lastIndexOf('/')+1)}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div ng-if="!step.logical_node" class="none-color text-center" style="padding: 6px 0;">
                                                                                暂无配置
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!--自定义配置-->
                                                                <div ng-if="step.phase_type == 5">
                                                                    <div collapse="!step.show_detail" class="content-border">
                                                                        <div class="row" style="padding-top: 18px;margin: 0px 0 0 20px;padding-bottom: 10px">
                                                                            <div class="col-sm-2 prog-content-tip"></div>
                                                                            <div class="col-sm-8" style="font-size: 12px;margin-top: 10px;">
                                                                                {{step.script.cmds[0]}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!--人工阶段-->
                                                                <div ng-if="step.phase_type == 6">
                                                                    <div collapse="!step.show_detail" class="content-border">
                                                                        <div class="row" style="padding-top: 18px;margin: 0 0 0 20px;padding-bottom: 10px">
                                                                            <div class="col-sm-2 prog-content-tip"></div>
                                                                            <div class="col-sm-8" style="font-size: 12px;margin-top: 10px;">
                                                                                <div style="word-break: break-all;" ng-bind-html="step.url_detail"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="module-vertical-common-line" style="left: 31px;" ng-if="!$last"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <label class="control-label" style="color:#999999;padding-bottom: 10px" ng-if="group.phase_list.length == 0">暂未配置发布阶段信息</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="module-vertical-common-line" style="left: 22px;bottom: 0;height: 13px;" ng-if="!$last"></div>
                            </div>
                            <!-- 发布参数-->
                            <div class="form-group form-style"  style="margin-bottom: 10px;">
                                <div class="col-sm-12 label-value" style="padding-left: 0px;">
                                    <table class="sub-table">
                                        <thead>
                                        <tr>
                                            <td>
                                                参数名
                                            </td>
                                            <td>
                                                参数值
                                            </td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="tr in info.pre_info.param_list track by $index" style="background: #1f3144" ng-if="tr.param_type !=3">
                                            <td  style="width: 145px;max-width: 145px;" title="{{tr.param_bk_desc ?  '参数描述:'+tr.param_bk_desc : '参数描述:--'}}">
                                                <span class="col-sm-7" style="text-align: left;;white-space: nowrap;text-overflow: ellipsis; overflow: hidden;padding: 0;" title="{{tr.param_name}}">{{tr.param_name}}</span>
                                                <span class="col-sm-5" style="color: #b1b1b1;white-space: nowrap;text-overflow: ellipsis; overflow: hidden;text-align: left;padding: 0;" title="{{tr.param_cn_name}}" ng-bind="tr.param_cn_name ? tr.param_cn_name : '--'"></span>
                                            </td>
                                            <td style="max-width: 380px;width: 340px;text-align: left;position: relative;padding-right: 25px;" title="{{tr.modify_flag == 2 ? '参数值不可修改':''}}">
                                                <div ng-if="tr.modify_flag == 2">
                                                    <span ng-if="!tr.sensitive_flag">{{tr.param_value}}</span>
                                                    <span ng-if="tr.sensitive_flag">******</span>
                                                </div>
                                                <div ng-if="tr.modify_flag != 2">
                                                <textarea  name="pub_param_value{{$index}}"
                                                           ng-if="!tr.sensitive_flag"
                                                           ui-codemirror="{ onLoad : paramShellLoaded}"
                                                           ui-refresh="control.code_reflash"
                                                           ng-model="tr.param_value"
                                                           class="sub-form-control"
                                                           required>
                                                     </textarea>
                                                    <!--只是为了兼容360浏览器阻止默认密码填写-->
                                                    <input type="password" style="display: none;" disabled autocomplete = "new-password"/>
                                                    <input type="password"
                                                           ng-if="tr.sensitive_flag"
                                                           class="pass_input"
                                                           style="height: 26px;padding-left: 5px;width: 100%"
                                                           autocomplete="new-password"
                                                           ng-model="tr.label_param_value"
                                                           disabled
                                                           required
                                                           ng-init="tr.label_param_value =  tr.param_value ?  '1111111111' : ''"
                                                    />
                                                    <div style="position: absolute;top: 9px;right: 6px;cursor: pointer;">
                                                        <i ng-if="!tr.sensitive_flag" class="fa fa-eye" title="明文" ng-click="tr.sensitive_flag=true; tr.label_param_value = tr.param_value ? '1111111111' : ''"></i>
                                                        <i ng-if="tr.sensitive_flag" class="fa fa-eye-slash" title="密文" ng-click="tr.sensitive_flag=false"></i>
                                                    </div>
                                                    <validate-msg tag-cn-name="参数值" name="pub_param_value{{$index}}"></validate-msg>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr ng-if="control.param_list_flag">
                                            <td colspan="2" style="text-align: center;">
                                                暂无数据
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 文件获取方式-->
            <!--<div class="form-group form-style" ng-if="info.pre_info.propackage_list.length != 0">
                <div class="col-sm-12">
                    <div class="row">
                        <label class="col-sm-2 control-label label-key">发布包</label>
                        <div class="col-sm-8">
                            <div class="form-group checkbox label-value">
                                <div style="display: inline-block;">
                                    <input type="radio" name="upload_flag" i-check ng-model="info.pre_info.upload_flag" ng-change="changeFileFlag(2);" value="2" ng-disabled="!info.pre_info.version_soc_name">
                                    <span style="position: relative; top: 1px;">从版本机</span>

                                </div>
                                <div style="margin-left: 40px;display: inline-block;">
                                    <input type="radio" name="upload_flag" i-check ng-model="info.pre_info.upload_flag" ng-change="changeFileFlag(1);" value="1"  style="margin-left: 50px;">
                                    <span style="position: relative; top: 1px;">从本地</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>-->
            <!-- 包-->
            <div class="form-group" ng-if="info.pre_info.propackage_list.length != 0">
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-sm-8 col-sm-offset-2" ng-if="info.pre_info.propackage_list.length != 0">
                            <!--发布包-->
                            <fieldset class="left" style="margin-right: 0px;min-width: 340px">
                                <legend style="color: #29B0E9">发布包</legend>
                                <div ng-if="info.pre_info.propackage_list.length != 0">
                                    <div class="row pac-row form-style" ng-repeat="prodpac in info.pre_info.propackage_list"
                                         id="prod-pac-{{$index}}" ng-mouseenter="addPacBg(prodpac,$index)" ng-mouseleave="removePacBg(prodpac,$index)">
                                        <label class="col-sm-2 control-label label-key" style="padding-left: 4px;padding-right: 10px"><span  ng-if="prodpac.required_flag"  style="margin-right: 5px;color: #e9416e;">*</span>{{prodpac.type_cn_name}}</label>
                                        <div class="col-sm-10">
                                            <div ng-if="info.pre_info.upload_flag == 3 && prodpac.package_list.length !=0" class="addPackageBorder">
                                                <div ng-repeat="propackage in prodpac.package_list" class="platform-package">
                                                    <div class="tablecss tag-md checked-tag"  title="{{propackage}}" >
                                                        {{propackage}}
                                                        <div>
                                                            <i class="fa fa-check"></i>
                                                        </div>
                                                    </div>
                                                    <div class="delete-package-btn"  ng-click="deletePlatformPackage($index,prodpac.package_list,prodpac.propackage_full_path)"><i class="fa fa-times"></i></div>
                                                </div>
                                            </div>
                                            <div ng-if="info.pre_info.upload_flag !=3" ng-repeat="propackage in prodpac.package_name_list" class="addPackageBorder">
                                                <div class="proj_packageTarFile_image"></div>
                                                <div class="proj_packPath">
                                                    <a  class="plan_preFullPath">{{propackage.propackage_full_path.substring(propackage.propackage_full_path.lastIndexOf('/')+1, propackage.propackage_full_path.length)}}</a>
                                                </div>
                                                <div style="margin-left: 32px;margin-top: -6px;">
                                                    <a ng-if="!propackage.downLoading && !propackage.no_exsit && !propackage.is_exsit_loading" class="ac-upload" ng-click="downloadPackage(propackage)" style="margin-right: 12px;">下载</a>
                                                    <span ng-if="!control.ready_info_flag && !propackage.downLoading && !propackage.no_exsit && !propackage.is_exsit_loading" class="plan_preDown_seperateLine">|</span>
                                                    <a ng-if="!control.ready_info_flag && !propackage.downLoading && !propackage.no_exsit && !propackage.is_exsit_loading"
                                                       ng-click="removeProdPackage(info.pre_info.propackage_list,prodpac,propackage)" class="ac-upload">删除</a>
                                                    <span ng-if="propackage.is_exsit_loading" class="plan_preDown_loading">文件下载中<i  class="fa fa-spinner fa-spin"></i></span>
                                                    <span ng-if="propackage.no_exsit" class="plan_preNoneFile">
                                                        <span class="plan_preNoneFile_span">获取失败</span>
                                                        <a ng-click="removeProdPackage(info.pre_info.propackage_list,prodpac,propackage)" class="ac-upload plan_preNoneFileDelete_a">删除</a>
                                                    </span>
                                                </div>
                                            </div>
                                            <div title="{{'添加'+ prodpac.type_cn_name}}" ng-if="!prodpac.add_pac_btn_disable"
                                                 ng-click="addProdPackage($index,info.pre_info.upload_flag)" class="plusHover">
                                                <span  class="fa fa-plus plan_preAddPackage_span"></span>
                                            </div>
                                            <div ng-if="prodpac.add_pac_btn_disable" class="plus-disable">
                                                <span  class="fa fa-plus plan_preAddPackage_span"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <div class="form-group" ng-if="control.package_exsit_flag" style="margin: 10px 0 -5px 0;float: left;">
                                <li class="plan_pre_uploadpack">请上传发布包</li>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 配置文件区域-->
            <div class="form-group form-style" ng-if="control.custom_config_flag || data.solid_config_list.length !=0">
                <div class="col-sm-12">
                    <div class="row">
                        <label class="col-sm-2 control-label label-key" style="padding-top: 13px">配置文件</label>
                        <div class="col-sm-8" style="position: relative">
                            <tabset class="commonTabs exec-program">
                                <tab active="config.config_tabs[0].active" style="cursor: pointer" ng-if="data.solid_config_list.length !=0">
                                    <tab-heading>
                                        固化配置
                                    </tab-heading>
                                    <div ng-if="config.config_tabs[0].active">
                                        <div class="form-group" style="margin-bottom: 0;padding-top: 10px">
                                            <div class="container-fluid" style="position: relative;">
                                                <div class="col-sm-12">
                                                    <div ng-repeat="phase  in  data.solid_config_list"  class="cmpt-module">
                                                        <div style="padding-left: 15px;">
                                                            <div class="cmpt-module-content">
                                                                <div class="row cmpt-module-head" style="border-color: rgba(68, 220, 253, 1);cursor: default">
                                                                    <div class="col-sm-1" style="width: 20px;margin-right: 10px;">
                                                                        <span class="phase-type-img header-solid-config"></span>
                                                                    </div>
                                                                    <div class="col-sm-6" style="padding-left: 25px;">
                                                                        <span class="cmpt-font" title="{{phase.phase_name}}" >{{phase.phase_name}}</span>
                                                                    </div>
                                                                    <!-- <div class="col-sm-4">
                                                                         <div class="pre_solid_config_ip" title="{{phase.execute_ip}}">
                                                                             <span >{{getProtocolTypeCnName(phase.execute_protocol_type)}}</span>
                                                                             <span>{{phase.execute_soc_name}}</span>
                                                                         </div>
                                                                     </div>-->
                                                                </div>
                                                                <div class="content-border">
                                                                    <div style="padding: 20px 30px 10px">
                                                                        <div ng-repeat="node in phase.phy_nodes">
                                                                            <div class="pre_solid_config_ip" title="{{node.ip}}">
                                                                                <span >{{getProtocolTypeCnName(node.execute_protocol_type)}}</span>
                                                                                <span>{{node.execute_soc_name}}</span>
                                                                            </div>
                                                                            <div class="row config-file-style" ng-class="$even ? 'config-file-even-background' : 'config-file-odd-background'" ng-click="showModifyFile(one,node,phase)" ng-repeat="one in node.files_list">
                                                                                <div class="col-sm-3" title="{{one.file.substring(one.file.lastIndexOf('/')+1,one.file.length)}}">
                                                                                    <span style="margin-right: 5px;"><i style="color: #d2f1fe;" class="fa fa-file-text-o"></i></span>{{one.file.substring(one.file.lastIndexOf('/')+1,one.file.length)}}
                                                                                </div>
                                                                                <div class="col-sm-4" style="overflow: hidden;white-space: nowrap;" title="{{one.file}}">{{one.file}}</div>
                                                                                <div style="float: right" ng-if="one.is_modify">
                                                                                    <span  class="exec-type ftp-color">已修改</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </tab>
                                <tab active="config.config_tabs[1].active" style="cursor: pointer" ng-if="control.custom_config_flag">
                                    <tab-heading>
                                        自定义配置
                                    </tab-heading>
                                    <div ng-if="config.config_tabs[1].active">
                                        <div ng-repeat="sub_tab  in  data.sub_tabs"  class="cmpt-module">
                                            <div style="padding-left: 15px;">
                                                <div class="cmpt-module-content">
                                                    <div class="row cmpt-module-head" ng-click="sub_tab.expand_flag = !sub_tab.expand_flag" style="border-color: rgba(68, 220, 253, 1);cursor: pointer">
                                                        <div class="col-sm-1" style="width: 20px;margin-right: 10px;">
                                                            <span class="phase-type-img header-solid-config"></span>
                                                        </div>
                                                        <div class="col-sm-6" style="padding-left: 25px;">
                                                            <span class="cmpt-font" title="{{sub_tab.phase_name}}" >{{sub_tab.phase_name}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="content-border" collapse="sub_tab.expand_flag">
                                                        <div style="padding: 20px 30px 10px">
                                                            <div class="container-fluid" style="margin-bottom: 0;padding-top: 10px">
                                                                <!--选择节点-->
                                                                <div class="row" style="padding: 0px 30px;">
                                                                    <div class="col-sm-4 label-value" style="position: relative">
                                                                        <bs-select name="prog_name"
                                                                                   items="data.node_list"
                                                                                   width="180"
                                                                                   my-select="sub_tab.soc_index"
                                                                                   select-val="getFileList(selectKey,$index,sub_tab)"
                                                                                   option-labal="lable"
                                                                                   option-key="index"
                                                                                   loading="control.node_list_loading"
                                                                                   disable="node.loading"
                                                                                   required></bs-select>
                                                                        <div class="pre_auto_config_ip" title="节点"></div>
                                                                    </div>
                                                                    <!--       <div class="col-sm-4 label-value" style="position: relative">
                                                                               <bs-select width=130 name="prog_name"
                                                                                          items="data.ver_soc_list"
                                                                                          my-select="info.node_soc.ver_soc"
                                                                                          option-labal="soc_name"
                                                                                          option-key="index"
                                                                                          select-val="selectCheckSoc(selectKey)"
                                                                                          disable="info.node.loading"
                                                                                          loading="control.node_list_loading"
                                                                                          required></bs-select>
                                                                               <div class="pre_auto_config_ip_check"  title="校验数据源"></div>
                                                                           </div>
                                                                           <div class="col-sm-4 label-value" style="position: relative">
                                                                               <bs-select width=130 name="prog_name"
                                                                                          items="data.exe_soc_list"
                                                                                          my-select="info.node_soc.exec_soc"
                                                                                          option-labal="soc_name"
                                                                                          option-key="index"
                                                                                          select-val="getFileList(selectKey)"
                                                                                          disable="info.node.loading"
                                                                                          loading="control.node_list_loading"
                                                                                          required></bs-select>
                                                                               <div class="pre_auto_config_exe" title="配置数据源"></div>
                                                                           </div>-->
                                                                </div>
                                                                <!--修改文件-->
                                                                <div class="row" style="margin-top: 20px;">
                                                                    <!--选择文件-->
                                                                    <div class="col-sm-6" style="padding:0">
                                                                        <div class="pub_pre_file_border">
                                                                            <div ng-if="sub_tab.node.paths.length == 0 && !sub_tab.node.err_msg">
                                                                                <div class="pub_pre_file_title" style="padding-left: 20px;">
                                                                                    文件路径:&nbsp;&nbsp;暂无
                                                                                </div>
                                                                                <div style="position: absolute;top:40%;left:40%">
                                                                                    <div class="pub_pre_file_content"></div>
                                                                                    <div style="color: #ccc;padding-left: 12px;">暂无</div>
                                                                                </div>
                                                                            </div>
                                                                            <div ng-if="sub_tab.node.paths.length != 0 || sub_tab.node.err_msg" >
                                                                                <file-browse node="sub_tab.node" change-path="changePath(sub_tab,$index);"></file-browse>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!--已修改的文件-->
                                                                    <div class="col-sm-6" style="padding:0">
                                                                        <div class="pub_pre_file_border" style="border-left: none;">
                                                                            <div class="pub_pre_file_title" style="padding-left: 10px;">
                                                                                已修改的文件&nbsp;&nbsp;
                                                                            </div>
                                                                            <div ng-if="!sub_tab.phy_nodes || sub_tab.phy_nodes.length == 0" style="position: absolute;top:40%;left:40%">
                                                                                <div class="pub_pre_file_content"></div>
                                                                                <div style="color: #ccc;padding-left: 12px;">暂无</div>
                                                                            </div>
                                                                            <div ng-if="sub_tab.phy_nodes.length != 0">
                                                                                <div style="padding: 20px 30px 10px">
                                                                                    <div ng-repeat="soc in sub_tab.phy_nodes" style="margin-bottom: 10px" ng-init="out_index=$index">
                                                                                        <div title="{{soc.file_soc_name}}">{{soc.execute_soc_username ? soc.execute_soc_username + "@" + soc.ip : soc.file_soc_name}}</div>
                                                                                        <div class="row config-file-style" style="position: relative;" ng-class="$even ? 'config-file-even-background' : 'config-file-odd-background'" ng-click="showModifyDefineFile(soc,file)" ng-repeat="file in soc.file_list">
                                                                                            <div class="col-sm-3" style="padding-left: 30px;overflow: hidden;white-space: nowrap;" title="{{file.substring(file.lastIndexOf('/')+1,file.length)}}">
                                                                                                <span style="margin-right: 5px;"><i style="color: #d2f1fe;vertical-align: middle" class="fa fa-file-text-o"></i></span><span style="vertical-align: top">{{file.substring(file.lastIndexOf('/')+1,file.length)}}</span>
                                                                                            </div>
                                                                                            <div class="col-sm-7" style="overflow: hidden;white-space: nowrap" title="{{file}}">{{file}}</div>
                                                                                            <div style="margin-right: 5px;cursor: pointer;position: absolute;right: 0;" ng-click="deleteDefineConfigModify($event,soc,out_index,$index,sub_tab)">
                                                                                                <span ><i class="fa fa-times" style="color: #ccc"></i></span>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--<tabset class="commonTabs exec-program">
                                            <tab ng-repeat="sub_tab in data.sub_tabs" active="sub_tab.active" select="select($index)">
                                                <tab-heading>
                                                    {{sub_tab.phase_name}}
                                                </tab-heading>
                                                <div class="container-fluid" style="margin-bottom: 0;padding-top: 10px">
                                                    &lt;!&ndash;选择节点&ndash;&gt;
                                                    <div class="row" style="padding: 0px 30px;">
                                                        <div class="col-sm-4 label-value" style="position: relative">
                                                            <bs-select name="prog_name"
                                                                       items="data.node_list"
                                                                       width="180"
                                                                       my-select="sub_tab.soc_index"
                                                                       select-val="getFileList(selectKey,$index,sub_tab)"
                                                                       option-labal="lable"
                                                                       option-key="index"
                                                                       loading="control.node_list_loading"
                                                                       disable="node.loading"
                                                                       required></bs-select>
                                                            <div class="pre_auto_config_ip" title="节点"></div>
                                                        </div>
                                                    </div>
                                                    &lt;!&ndash;修改文件&ndash;&gt;
                                                    <div class="row" style="margin-top: 20px;">
                                                        &lt;!&ndash;选择文件&ndash;&gt;
                                                        <div class="col-sm-6" style="padding:0">
                                                            <div class="pub_pre_file_border">
                                                                <div ng-if="sub_tab.node.paths.length == 0 && !sub_tab.node.err_msg">
                                                                    <div class="pub_pre_file_title" style="padding-left: 20px;">
                                                                        文件路径:&nbsp;&nbsp;暂无
                                                                    </div>
                                                                    <div style="position: absolute;top:40%;left:40%">
                                                                        <div class="pub_pre_file_content"></div>
                                                                        <div style="color: #ccc;padding-left: 12px;">暂无</div>
                                                                    </div>
                                                                </div>
                                                                <div ng-if="sub_tab.node.paths.length != 0 || sub_tab.node.err_msg" >
                                                                    <file-browse node="sub_tab.node" change-path="changePath(sub_tab);"></file-browse>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        &lt;!&ndash;已修改的文件&ndash;&gt;
                                                        <div class="col-sm-6" style="padding:0">
                                                            <div class="pub_pre_file_border" style="border-left: none;">
                                                                <div class="pub_pre_file_title" style="padding-left: 10px;">
                                                                    已修改的文件&nbsp;&nbsp;
                                                                </div>
                                                                <div ng-if="!sub_tab.phy_nodes || sub_tab.phy_nodes.length == 0" style="position: absolute;top:40%;left:40%">
                                                                    <div class="pub_pre_file_content"></div>
                                                                    <div style="color: #ccc;padding-left: 12px;">暂无</div>
                                                                </div>
                                                                <div ng-if="sub_tab.phy_nodes.length != 0">
                                                                    <div style="padding: 20px 30px 10px">
                                                                        <div ng-repeat="soc in sub_tab.phy_nodes" style="margin-bottom: 10px" ng-init="out_index=$index">
                                                                            <div title="{{soc.file_soc_name}}">{{soc.file_soc_name}}</div>
                                                                            <div class="row config-file-style" style="position: relative;" ng-class="$even ? 'config-file-even-background' : 'config-file-odd-background'" ng-click="showModifyDefineFile(soc,file)" ng-repeat="file in soc.file_list">
                                                                                <div class="col-sm-3" style="padding-left: 30px;overflow: hidden;white-space: nowrap;" title="{{file.substring(file.lastIndexOf('/')+1,file.length)}}">
                                                                                    <span style="margin-right: 5px;"><i style="color: #d2f1fe;vertical-align: middle" class="fa fa-file-text-o"></i></span><span style="vertical-align: top">{{file.substring(file.lastIndexOf('/')+1,file.length)}}</span>
                                                                                </div>
                                                                                <div class="col-sm-7" style="overflow: hidden;white-space: nowrap" title="{{file}}">{{file}}</div>
                                                                                <div style="margin-right: 5px;cursor: pointer;position: absolute;right: 0;" ng-click="deleteDefineConfigModify($event,soc,out_index,$index,sub_tab)">
                                                                                    <span ><i class="fa fa-times" style="color: #ccc"></i></span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </tab>
                                        </tabset>-->
                                    </div>
                                </tab>
                            </tabset>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--底部按钮-->
        <div class="form-group" style="margin-top: 20px;">
            <div class="col-sm-12 text-center" >
                <button  type="button" class="cancel-btn btn-md" style="text-align:center;" ng-click="quickCancel();">
                    取消
                </button>
                <button type="submit" class="save-btn btn-md" style="text-align:center;">保存</button>
            </div>
        </div>
    </form>
</div>
