<form name="form.job_form" class="form-horizontal job-method" novalidate autocomplete="off" onKeyPress="if(event.keyCode==13) return false">
    <div  class="modal-header">
        <h3 class="modal-title">作业方式</h3>
        <div ng-click="formCancel()"></div>
        <i title="脚本填写时,输出语句前加‘echo '#output#'’,作为开始标志。" ng-if="form_control.job_method == 2" class="fa-info-circle fa"></i>
    </div>
    <div class="modal-body">
        <ul class="nav nav-pills" style="padding-bottom: 20px" ng-class="{'nav-readonly':(job_type >= 24 && job_type <= 27) || cmpt_info.cmpt_list_loading}" ng-if="!is_special_element && !is_detail">
            <li role="presentation" class="commtabl" ng-class="form_control.job_method == 1 ? 'groupclick':'groupleave'">
                <a  ng-click="changeJobType(1);" ng-bind="is_detail ? '组件':'选择组件'"></a>
            </li>
            <li role="presentation" class="commtabr" ng-class="form_control.job_method == 2 ? 'groupclick':'groupleave'">
                <a  ng-click="changeJobType(2);" >自定义</a>
            </li>
        </ul>
        <div ng-if="form_control.job_method == 1">
            <!-- 正在加载-->
            <div class="row" ng-show="cmpt_info.cmpt_list_loading">
                <div class="col-sm-4 col-sm-offset-4 text-center" style="margin-top: 120px;margin-bottom: 120px">
                    <div ng-show="!cmpt_info.error_message" class="info-frame">
                        <span style="color:#44dcfd;">正在获取信息&nbsp;&nbsp;<i style="font-size: 24px;color:#44dcfd;" class="fa fa-spinner fa-spin"></i></span>
                    </div>
                    <div ng-show="cmpt_info.error_message" class="info-frame">
                        <span style="color:#d9534f;">获取信息异常</span>
                        <div class="error-msg" ng-bind="cmpt_info.error_message"></div>
                    </div>
                </div>
            </div>
            <!-- 加载成功-->
            <div ng-show="!cmpt_info.cmpt_list_loading">
                <!-- 基础添加组件-->
                <div class="row" ng-show="!is_detail && !is_special_element">
                    <div class="col-md-12 lg-table">
                        <table class="table table-no-bordered  tbody_height" >
                            <thead class="fixedThead">
                            <tr>
                                <td style="width: 50px">选择</td>
                                <td style="width: 235px">组件名</td>
                                <td style="width: 100px">执行类别</td>
                                <td style="width: 110px">创建人</td>
                                <td style="width: 185px">创建时间</td>
                                <td style="width: 165px">修改时间</td>
                            </tr>
                            </thead>
                            <tbody class="scrollTbody">
                            <tr ng-repeat="tr in cmpt_info.cmpt_list" class="tbl-odd" ng-click="selectCmptGetScript($index)">
                                <td style="width: 50px">
                                    <input type="radio" name="checked" ng-model="cmpt_info.checked" i-check value={{$index}} ng-change="selectCmptGetScript($index)">
                                </td>
                                <td style="width:270px" ng-class="cmpt_info.checked == $index ? 'checked_style' : ''">
                                    <div style="word-break: break-all" ng-bind="tr.cn_name ? tr.cn_name : '--'"></div>
                                </td>
                                <td style="width:100px" ng-class="cmpt_info.checked == $index ? 'checked_style' : ''">
                                    <div ng-bind="tr.execute_type_cn ? tr.execute_type_cn : '--'"></div>
                                </td>
                                <td style="width:120px" ng-class="cmpt_info.checked == $index ? 'checked_style' : ''">
                                    <div ng-bind="tr.crt_user_name ? tr.crt_user_name : '--'"></div>
                                </td>
                                <td style="width:190px" ng-class="cmpt_info.checked == $index ? 'checked_style' : ''">
                                    <div ng-show="tr.crt_bk_time" >{{tr.crt_bk_date}}&nbsp;{{tr.crt_bk_time}}</div>
                                    <div ng-show="!tr.crt_bk_time">--</div>
                                </td>
                                <td style="width:190px" ng-class="cmpt_info.checked == $index ? 'checked_style' : ''">
                                    <div ng-show="tr.modify_bk_time">{{tr.modify_bk_date}}&nbsp;{{tr.modify_bk_time}}</div>
                                    <div ng-show="!tr.modify_bk_time">--</div>
                                </td>
                            </tr>
                            <tr class="no_data">
                                <td style="text-align: center;border: none;" ng-if="cmpt_info.cmpt_list.length == 0">暂无数据</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!--元素使用的组件-->
                <div ng-if="is_special_element || is_detail">
                    <div class="form-group form-style">
                        <label class="col-sm-2 control-label label-key">组件名</label>
                        <div class="col-sm-8 label-value" ng-bind="cmpt_data.comp_cn_name" style="padding-top: 7px;"></div>
                    </div>
                    <div class="form-group form-style">
                        <label class="col-sm-2 control-label label-key">脚本类型</label>
                        <div class="col-sm-8 label-value">
                            <bs-select width="166" items="basic_data.iml_type_list"
                                       my-select="cmpt_data.impl_type"
                                       option-labal="value"
                                       disable="is_detail"
                                       option-key="key"
                                       select-val="selectScriptType(selectKey)"
                            ></bs-select>
                            <validate-msg tag-cn-name="脚本类型" type="select" model="cmpt_data.impl_type" ng-if="!is_detail"></validate-msg>
                        </div>
                    </div>
                    <div class="form-group form-style">
                        <label class="col-sm-2 control-label label-key">脚本来源</label>
                        <div class="col-sm-8 label-value"  style="margin-top: 6px;">
                            <label>
                                <input type="radio" i-check ng-model="cmpt_data.script_source" value=1 ng-disabled="is_detail">
                                输入
                            </label>
                            <label style="margin-left:25px;">
                                <input type="radio" i-check ng-model="cmpt_data.script_source" value=2 disabled>
                                文件
                            </label>
                        </div>
                    </div>
                    <!--C/C++ 附件-->
                    <div class="form-group form-style" ng-if="cmpt_data.impl_type == 15 || cmpt_data.impl_type==17">
                        <label class="control-label col-sm-2 label-key" style="padding-top: 12px">执行程序</label>
                        <div class="col-sm-8 label-value" ng-if="is_detail">
                            <file-upload fileupload="accessory_fileupload" successthen="ImportAccessorySuccessThen(cmpt_data);" downfile="downloadAccessoryFile(cmpt_data);"></file-upload>
                        </div>
                        <div class="col-sm-8 label-value" ng-if="!is_detail">
                            <file-upload fileupload="accessory_fileupload" successthen="ImportAccessorySuccessThen(cmpt_data);" deletefile="removeAccessoryFile(cmpt_data);" downfile="downloadAccessoryFile(cmpt_data);"></file-upload>
                        </div>
                    </div>
                    <div class="form-group form-style" ng-if="cmpt_data.impl_type ==15">
                        <label class="col-sm-2 control-label label-key">执行命令</label>
                        <div class="col-sm-8 label-value">
                             <textarea name="exec_script"
                                       ui-codemirror="is_detail ? viewOptions : {onLoad : commandNoneShellLoaded}"
                                       ui-refresh="form_control.refresh_script"
                                       ng-model="cmpt_data.command.exec_script"
                                       class="form-control"
                                       required>
                            </textarea>
                            <validate-msg tag-cn-name="脚本" model="cmpt_data.cmpt_data.exec_script" name="exec_script" ng-if="!is_detail"></validate-msg>
                        </div>
                    </div>
                    <!--执行命令有提示-自定义-->
                    <div ng-if="cmpt_data.impl_type==17" class="form-group form-style">
                        <div class="col-sm-2 text-right">
                            <label class="control-label label-key">执行命令</label>
                        </div>
                        <div class="col-sm-5" id="commandShell">
                             <textarea name="command"
                                       ui-codemirror="{onLoad : commandShellLoaded}"
                                       ui-refresh="form_control.refresh_script"
                                       ng-model="cmpt_data.command.exec_script"
                                       class="form-control"
                                       required>
                             </textarea>
                            <validate-msg tag-cn-name="执行命令" model="cmpt_data.command.exec_script" name="command"></validate-msg>
                        </div>
                    </div>
                    <!--语言环境-->
                    <div class="form-group form-style" ng-if="cmpt_data.impl_type == 14"><!--|| cmpt_data.impl_type == 7 || cmpt_data.impl_type == 8 -->
                        <label class="control-label col-sm-2 label-key">JAVA环境</label>
                        <div class="col-sm-8 label-value">
                            <label ng-if="is_detail" ng-bind="cmpt_data.env_name ? cmpt_data.env_name : '--'" style="padding-top: 7px"></label>
                            <bs-select
                                    width="166"
                                    name="env_name"
                                    items="basic_data.env_list"
                                    my-select="cmpt_data.env_name"
                                    ng-if="!is_detail"
                                    required></bs-select><!--  select-val="selectEnvName(selectKey)"-->
                            <validate-msg tag-cn-name="语言环境" type="select" name="env_name" model="cmpt_data.env_name" ng-if="!is_detail"></validate-msg>
                        </div>
                    </div>
                    <div class="form-group form-style" ng-if="cmpt_data.impl_type !=15">
                        <label class="col-sm-2 control-label label-key">脚本</label>
                        <div class="col-sm-8 label-value">
                             <textarea name="exec_script"
                                       ui-codemirror="is_detail ? viewOptions : {onLoad : shellLoaded}"
                                       ui-refresh="form_control.refresh_script"
                                       ng-model="cmpt_data.exec_script"
                                       class="form-control"
                                       required>
                            </textarea>
                            <validate-msg tag-cn-name="脚本" model="cmpt_data.exec_script" name="exec_script" ng-if="!is_detail"></validate-msg>
                        </div>
                    </div>
                    <!--输入-->
                    <div class="form-group form-style" ng-if="cmpt_data.param_list.length != 0">
                        <label class="col-sm-2 control-label label-key">输入参数</label>
                        <div class="col-sm-8 label-value" style="padding:0px 20px" ng-style="{'pointer-events': is_detail ? 'none':''}">
                            <table class="sub-table"  tbl-Data="cmpt_data.param_list">
                                <thead>
                                <tr class="cursor_default">
                                    <td width="120px">
                                        参数名
                                    </td>
                                    <td width="100px">
                                        中文名
                                    </td>
                                    <td style="min-width: 60px;max-width:230px">
                                        参数值
                                    </td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="param in cmpt_data.param_list">
                                    <td>
                                        <span ng-bind="param.param_name ? param.param_name : '--'" ng-if="is_detail"></span>
                                        <input type="text" class="sub-form-control" ng-model="param.param_name" name="param_name{{$id}}" ng-if="!is_detail" required/>
                                        <validate-msg style="font-size: 10px;" tag-cn-name="参数名"  name="param_name{{$id}}" ng-if="!is_detail"></validate-msg>
                                    </td>
                                    <td>
                                        <span ng-bind="param.param_cn_name ? param.param_cn_name : '--'" ng-if="is_detail"></span>
                                        <input type="text" class="sub-form-control" ng-model="param.param_cn_name" name="param_cn_name{{$id}}" ng-if="!is_detail"/>
                                    </td>
                                    <td style="text-align: left;min-width: 60px;max-width:225px">
                                        <span ng-if="is_detail" ng-bind="param.param_value ? param.param_value : '--'"></span>
                                        <textarea name="param_value{{$id}}"
                                                  ui-codemirror="{ onLoad : paramShellLoaded}"
                                                  ui-refresh="true"
                                                  ng-model="param.param_value"
                                                  style="color: #d2f1fe"
                                                  ng-maxlength="250"
                                                  ng-if="!is_detail"
                                                  class="sub-form-control">
                                        </textarea>
                                        <validate-msg style="font-size: 10px;" tag-cn-name="默认值"  name="param_value{{$id}}" ng-if="!is_detail"></validate-msg>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--输出-->
                    <div class="form-group form-style">
                        <label class="col-sm-2 control-label label-key">输出参数</label>
                        <div class="col-sm-8" style="padding:0px 20px" ng-if="!is_detail">
                            <table class="sub-table" style="color: #ccc" row-plus="addOutputParam()"  tbl-Data="cmpt_data.output">
                                <thead>
                                <tr class="cursor_default">
                                    <td width="120px">
                                        参数名
                                    </td>
                                    <td>
                                        中文名
                                    </td>
                                    <td width="50px" ng-if="!is_detail">
                                        操作
                                    </td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="param in cmpt_data.output">
                                    <td>
                                        <input type="text"
                                               class="sub-form-control"
                                               ng-model="param.param_name"
                                               name="param_name{{$id}}"
                                               ensure-only="sava_data.output | param_name"
                                               required/>
                                        <validate-msg tag-cn-name="参数名" model="param.param_name" name="param_name{{$id}}"></validate-msg>
                                    </td>
                                    <td>
                                        <input type="text" class="sub-form-control" ng-model="param.param_cn_name" name="param_cn_name{{$id}}"/>
                                    </td>
                                    <td ng-if="!is_detail">
                                        <div ng-click="removeOutputParam($index,2)" style="text-align: center;">
                                            <i class="fa fa-trash-o"></i>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-sm-8" style="padding:0px 20px" ng-if="is_detail">
                            <table class="sub-table" style="color: #ccc">
                                <thead>
                                <tr class="cursor_default">
                                    <td width="120px">
                                        参数名
                                    </td>
                                    <td>
                                        中文名
                                    </td>
                                </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="param in cmpt_data.output">
                                        <td>
                                            <span ng-bind="param.param_name ? param.param_name : '--'"></span>
                                        </td>
                                        <td>
                                            <span ng-bind="param.param_cn_name"></span>
                                        </td>
                                    </tr>
                                    <tr ng-if="cmpt_data.output.length == 0">
                                        <td colspan="2" style="color: #999">暂无数据</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--插件列表-->
                    <div class="form-group form-style" ng-if="basic_data.plugin_list.length">
                        <div class="col-sm-2 text-right">
                            <label class="control-label label-key">插件列表</label>
                        </div>
                        <div class="col-sm-8">
                            <!--查看-->
                            <table class="sub-table table text-center" tbl-Data="cmpt_data.plugin_list" ng-if="is_detail">
                                <thead>
                                <tr>
                                    <td  style="text-align: left;width: 170px;min-width: 170px;max-width: 170px;">插件名</td>
                                    <td  width="200px" style="text-align: left">插件类型</td>
                                    <td  style="text-align: left">插件描述</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr  ng-repeat="tr in cmpt_data.plugin_list">
                                    <td>
                                        <div  style="text-align: left;">
                                            <span>{{tr.plugin_name}}</span>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <span>{{getPluginTypeCnName(tr.plugin_type)}}</span>
                                    </td>
                                    <td style="text-align: left;max-width: 200px;overflow: hidden;white-space: nowrap">
                                        <span>{{tr.plugin_bk_desc}}</span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <!--编辑-->
                            <table class="sub-table table text-center" tbl-Data="cmpt_data.plugin_list" row-plus="addAvailablePlugin(cmpt_data)" ng-if="!is_detail">
                                <thead>
                                <tr>
                                    <td  style="text-align: left;width: 170px;min-width: 170px;max-width: 170px;">插件名</td>
                                    <td  width="200px" style="text-align: left">插件类型</td>
                                    <td  style="text-align: left">插件描述</td>
                                    <td style="width: 60px;text-align: left;">操作</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr  ng-repeat="tr in cmpt_data.plugin_list">
                                    <td>
                                        <div  style="text-align: left;">
                                            <bs-select
                                                    width="160"
                                                    name="plugin_name{{$id}}"
                                                    items="basic_data.plugin_list"
                                                    select-val="bindPluginInfo(selectKey,$index ,tr, cmpt_data)"
                                                    option-key="plugin_name"
                                                    option-labal="plugin_name"
                                                    no-border
                                                    my-select="tr.plugin_name"
                                                    required
                                            ></bs-select>
                                            <validate-msg type="select" tag-cn-name="插件名" name="plugin_name{{$id}}" model="tr.plugin_name"></validate-msg>
                                        </div>
                                    </td>
                                    <td style="text-align: left;">
                                        <span>{{getPluginTypeCnName(tr.plugin_type)}}</span>
                                    </td>
                                    <td style="text-align: left;max-width: 200px;overflow: hidden;white-space: nowrap">
                                        <span>{{tr.plugin_bk_desc}}</span>
                                    </td>
                                    <td style="text-align: left;">
                                        <span class="fa fa-trash-o" style="cursor: pointer;padding-left: 10px;" ng-click="deleteSinglePlugin($index,cmpt_data)"></span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!--基础元素查看脚本加载-->
                <div class="row" ng-if="cmpt_info.script_loading || cmpt_info.get_script_err">
                    <div class="col-sm-4 col-sm-offset-4 text-center" style="margin-top: 10px;margin-bottom: 10px">
                        <div ng-if="!cmpt_info.get_script_err">
                            <span style="color:#44dcfd;">正在获取脚本信息&nbsp;&nbsp;<i style="font-size: 24px;color:#44dcfd;" class="fa fa-spinner fa-spin"></i></span>
                        </div>
                        <div ng-if="cmpt_info.get_script_err" style="height:120px;line-height:50px;" title="{{cmpt_info.get_script_err}}">
                            <span style="color:#d9534f;">获取组件信息异常</span>
                            <div class="error-msg" ng-bind="cmpt_info.get_script_err"></div>
                        </div>
                    </div>
                </div>
                <!--基础元素查看组件脚本加载成功-->
                <div class="row form-style" ng-if="!cmpt_info.script_loading && (!cmpt_info.get_script_err) && (cmpt_info.checked > -1) && !is_detail" style="padding-top: 8px">
                    <div class="col-sm-2" style="width: 80px">
                        <label class="control-label label-key">执行脚本</label>
                    </div>
                    <div class="col-sm-10">
                        <textarea
                                ui-codemirror="viewOptions"
                                ui-refresh="form_control.job_method == 1"
                                placeholder="执行脚本"
                                ng-model="cmpt_data.exec_script">
                        </textarea>
                    </div>
                </div>
            </div>
        </div>
        <!--自定义-->
        <div ng-if="form_control.job_method == 2">
            <div class="form-group form-style" ng-if="job_type >= 24 && job_type <= 27">
                <label class="col-sm-2 control-label label-key" ng-if="job_type != 25">服务名称</label>
                <label class="col-sm-2 control-label label-key" ng-if="job_type == 25">服务IP</label>
                <div class="col-sm-5 label-value" ng-if="job_type != 25">
                    <input type="text"
                           name="srv_name"
                           ng-model="sava_data.service_name"
                           class="form-control"
                           placeholder="输入服务名称"
                           ng-model-options="{updateOn: 'blur'}"
                           ng-maxlength=100
                           ng-disabled="is_detail"
                           required>
                    <validate-msg tag-cn-name="服务名称" name="srv_name"></validate-msg>
                </div>
                <div class="col-sm-5 label-value" ng-if="job_type == 25">
                    <input type="text"
                           name="srv_ip"
                           ng-model="sava_data.service_ip"
                           class="form-control"
                           placeholder="输入服务IP"
                           ng-model-options="{updateOn: 'blur'}"
                           ng-maxlength=100
                           ng-disabled="is_detail"
                           required>
                    <validate-msg tag-cn-name="服务IP" name="srv_ip"></validate-msg>
                </div>
            </div>
            <div class="form-group form-style" ng-if="job_type != 14 && job_type != 15 && job_type != 24 && job_type != 25 && job_type != 26 && job_type != 27">
                <label class="col-sm-2 control-label label-key">脚本类型</label>
                <div class="col-sm-4 label-value">
                    <bs-select width="166" items="basic_data.iml_type_list"
                               my-select="sava_data.impl_type"
                               option-labal="value"
                               option-key="key"
                               disable="is_detail"
                               select-val="selectScriptType(selectKey)"
                            ></bs-select>
                    <validate-msg tag-cn-name="脚本类型" type="select" model="sava_data.impl_type"></validate-msg>
                </div>
                <label class="col-sm-2 control-label label-key">脚本来源</label>
                <div class="col-sm-4 label-value"  style="margin-top: 6px;">
                    <label>
                        <input type="radio" name="parallel_task" i-check ng-model="sava_data.script_source" value=1 ng-disabled="is_detail">
                        输入
                    </label>
                    <label style="margin-left:25px;">
                        <input type="radio" name="parallel_task" i-check ng-model="sava_data.script_source" value=2 disabled>
                        文件
                    </label>
                </div>
            </div>
            <div class="form-group form-style" ng-if="job_type == 14 || job_type == 15">
                <label class="col-sm-2 control-label label-key">数据库类型</label>
                <div class="col-sm-4 label-value">
                    <bs-select width="166" items="basic_data.dataBase_type_list"
                               my-select="sava_data.dataBase_type"
                               option-labal="value"
                               option-key="key"
                               disable="is_detail"
                            ></bs-select>
                    <validate-msg tag-cn-name="数据库类型" type="select" model="sava_data.dataBase_type"></validate-msg>
                </div>
                <label class="col-sm-2 control-label label-key">SQL来源</label>
                <div class="col-sm-4 label-value"  style="margin-top: 6px;">
                    <label>
                        <input type="radio" name="parallel_task" i-check ng-model="sava_data.sql_source" value=1 ng-disabled="is_detail">
                        输入
                    </label>
                    <label style="margin-left:25px;">
                        <input type="radio" name="parallel_task" i-check ng-model="sava_data.sql_source" value=2 disabled>
                        文件
                    </label>
                </div>
            </div>
            <div class="form-group form-style" ng-if="form_control.is_service">
                <div ng-if="job_type == 26">
                    <label class="col-sm-2 control-label label-key">请求方式</label>
                    <div class="col-sm-8 label-value">
                        <bs-select width="166" items="basic_data.request_method_list"
                                   my-select="sava_data.request_method"
                                   disable="is_detail"
                        ></bs-select>
                        <validate-msg tag-cn-name="请求方式" type="select" model="sava_data.request_method"></validate-msg>
                    </div>
                </div>
                <div ng-if="job_type == 25">
                    <label class="col-sm-2 control-label label-key">服务端口号</label>
                    <div class="col-sm-5 label-value">
                        <input type="text"
                               name="srv_port"
                               ng-model="sava_data.service_port"
                               class="form-control"
                               placeholder="输入服务端口号"
                               ng-model-options="{updateOn: 'blur'}"
                               ng-maxlength=100
                               ng-disabled="is_detail"
                               required>
                        <validate-msg tag-cn-name="服务端口号" name="srv_port"></validate-msg>
                    </div>
                </div>
                <div ng-if="job_type == 24">
                    <label class="col-sm-2 control-label label-key">服务URL地址</label>
                    <div class="col-sm-5 label-value">
                        <input type="text"
                               name="srv_url"
                               ng-model="sava_data.service_url"
                               class="form-control"
                               placeholder="输入服务URL"
                               ng-model-options="{updateOn: 'blur'}"
                               ng-maxlength=100
                               ng-disabled="is_detail"
                               required>
                        <validate-msg tag-cn-name="服务URL地址" name="srv_url"></validate-msg>
                    </div>
                </div>
            </div>
            <!--C/C++ 附件-->
            <div class="form-group form-style" ng-if="sava_data.impl_type == 15 || sava_data.impl_type==17">
                <label class="control-label col-sm-2 label-key" style="padding-top: 12px">执行程序</label>
                <div class="col-sm-8 label-value" ng-if="is_detail">
                    <file-upload fileupload="accessory_fileupload" successthen="ImportAccessorySuccessThen(sava_data);" downfile="downloadAccessoryFile(sava_data);"></file-upload>
                </div>
                <div class="col-sm-8 label-value" ng-if="!is_detail">
                    <file-upload fileupload="accessory_fileupload" successthen="ImportAccessorySuccessThen(sava_data);" deletefile="removeAccessoryFile(sava_data);" downfile="downloadAccessoryFile(sava_data);"></file-upload>
                </div>
            </div>
            <div class="form-group form-style" ng-if="sava_data.impl_type ==15">
                <label class="col-sm-2 control-label label-key">执行命令</label>
                <div class="col-sm-8 ">
                     <textarea name="exec_script"
                               ui-codemirror="is_detail ? viewOptions : {onLoad : commandNoneShellLoaded}"
                               ui-refresh="form_control.refresh_script"
                               ng-model="sava_data.command.exec_script"
                               class="form-control label-value"
                               required>
                    </textarea>
                    <validate-msg tag-cn-name="脚本" model="sava_data.cmpt_data.exec_script" name="exec_script" ng-if="!is_detail"></validate-msg>
                </div>
            </div>
            <!--执行命令有提示-自定义-->
            <div ng-if="sava_data.impl_type==17" class="form-group form-style">
                <div class="col-sm-2 text-right">
                    <label class="control-label label-key">执行命令</label>
                </div>
                <div class="col-sm-5">
                     <textarea name="command"
                               ui-codemirror="{onLoad : commandShellLoaded}"
                               ui-refresh="form_control.refresh_script"
                               ng-model="sava_data.command.exec_script"
                               class="form-control"
                               required>
                     </textarea>
                    <validate-msg tag-cn-name="执行命令" model="sava_data.command.exec_script" name="command"></validate-msg>
                </div>
            </div>
            <!--语言环境-->
            <div class="form-group form-style" ng-if="sava_data.impl_type == 14">
                <label class="control-label col-sm-2 label-key">JAVA环境</label>
                <div class="col-sm-8 label-value">
                    <label ng-if="is_detail" ng-bind="sava_data.env_name ? sava_data.env_name : '--'" style="padding-top: 7px"></label>
                    <bs-select
                            width="166"
                            name="env_name"
                            items="basic_data.env_list"
                            my-select="sava_data.env_name"
                            ng-if="!is_detail"
                            required></bs-select>
                    <validate-msg tag-cn-name="JAVA环境" type="select" name="env_name" model="sava_data.env_name" ng-if="!is_detail"></validate-msg>
                </div>
            </div>
            <div class="form-group form-style" ng-if="job_type != 24 && job_type != 25 && job_type != 26 && job_type != 27 && sava_data.impl_type !=15">
                <label class="col-sm-2 control-label label-key" style="color: #336699">脚本</label>
                <div class="col-sm-8 label-value">
                     <textarea name="exec_script"
                               ui-codemirror="is_detail ? viewOptions : {onLoad : shellLoaded}"
                               ui-refresh="form_control.refresh_script"
                               ng-model="sava_data.exec_script"
                               class="form-control"
                               required>
                     </textarea>
                    <validate-msg tag-cn-name="脚本" model="cmpt_info.exec_script" name="exec_script"></validate-msg>
                </div>
            </div>
            <!--输入参数-->
            <div class="form-group form-style" ng-if="sava_data.param_list.length != 0 && !form_control.is_service">
                <label class="col-sm-2 control-label label-key">输入参数</label>
                <div class="col-sm-8 label-value" style="padding:0px 20px" ng-style="{'pointer-events': is_detail ? 'none':''}">
                    <table class="sub-table"  tbl-Data="sava_data.param_list">
                        <thead>
                        <tr class="cursor_default">
                            <td width="120px">
                                参数名
                            </td>
                            <td width="100px">
                                中文名
                            </td>
                            <td>
                                值来源
                            </td>
                            <td style="min-width: 60px;max-width:230px">
                                参数值
                            </td>
                            <td>
                                是否必输
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="param in sava_data.param_list">
                            <td>
                                <input type="text" class="sub-form-control" ng-model="param.param_name" name="param_name{{$id}}" required/>
                                <validate-msg style="font-size: 10px;" tag-cn-name="参数名"  name="param_name{{$id}}"></validate-msg>
                            </td>
                            <td>
                                <input type="text" class="sub-form-control" ng-model="param.param_cn_name" name="param_cn_name{{$id}}"/>
                            </td>
                            <td>
                                固定值
                            </td>
                            <td style="text-align: left;min-width: 60px;max-width:225px">
                                <span ng-if="is_detail" ng-bind="param.param_value"></span>
                                <textarea name="param_value{{$id}}"
                                          ui-codemirror="{ onLoad : paramShellLoaded}"
                                          ui-refresh="true"
                                          ng-model="param.param_value"
                                          ng-maxlength="250"
                                          ng-if="!is_detail"
                                          class="form-control">
                                </textarea>
                                <validate-msg style="font-size: 10px;" tag-cn-name="默认值"  name="param_value{{$id}}" ng-if="!is_detail"></validate-msg>
                            </td>
                            <td style="text-align: center;">
                                <input type="checkbox" name="cmpt_type" i-check ng-model="param.haveTo" ng-disabled="is_detail"/>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="form-group form-style" ng-if="form_control.is_service">
                <label class="col-sm-2 control-label label-key">输入参数</label>
                <div class="col-sm-8 label-value" style="padding:0px 20px" ng-style="{'pointer-events': is_detail ? 'none':''}">
                    <table class="sub-table"  tbl-Data="sava_data.param_list">
                        <thead>
                        <tr class="cursor_default">
                            <td width="120px">
                                参数名
                            </td>
                            <td width="100px">
                                中文名
                            </td>
                            <td>
                                值来源
                            </td>
                            <td style="min-width: 70px;max-width:230px">
                                参数值
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="param in sava_data.param_list">
                            <td>
								<span ng-bind="param.param_name"></span>
                            </td>
                            <td>
                                <input type="text" class="sub-form-control" ng-model="param.param_cn_name" name="param_cn_name{{$id}}"/>
                            </td>
                            <td>
                                固定值
                            </td>
                            <td style="text-align: left;min-width: 60px;max-width:225px">
                                <span ng-if="is_detail" ng-bind="param.param_value"></span>
                                <textarea name="param_value{{$id}}"
                                          ng-model="param.param_value"
                                          style="resize: none;color: #d2f1fe;"
                                          placeholder="输入json格式"
                                          ng-if="!is_detail"
                                          class="form-control">
                                </textarea>
                                <validate-msg style="font-size: 10px;" tag-cn-name="默认值"  name="param_value{{$id}}" ng-if="!is_detail"></validate-msg>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--输出参数-->
            <div class="form-group form-style">
                <label class="col-sm-2 control-label label-key" >输出参数</label>
                <!--普通作业的输出编辑-->
                <div class="col-sm-8" style="padding:0px 20px" ng-if="!form_control.is_database && !form_control.is_service && !is_detail">
                    <table class="sub-table" style="color: #ccc" row-plus="addOutputParam()"  tbl-Data="sava_data.output">
                        <thead>
                        <tr class="cursor_default">
                            <td width="120px">
                                参数名
                            </td>
                            <td>
                                中文名
                            </td>
                            <td width="50px">
                                操作
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="param in sava_data.output">
                            <td>
                                <input type="text"
                                       class="sub-form-control"
                                       ng-model="param.param_name"
                                       name="param_name{{$id}}"
                                       ensure-only="sava_data.output | param_name"
                                       required/>
                                <validate-msg tag-cn-name="参数名" model="param.param_name" name="param_name{{$id}}"></validate-msg>
                            </td>
                            <td>
                                <input type="text" class="sub-form-control" ng-model="param.param_cn_name" name="param_cn_name{{$id}}"/>
                            </td>
                            <td>
                                <div ng-click="removeOutputParam($index,2)" style="text-align: center;">
                                    <i class="fa fa-trash-o"></i>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <!--普通作业的输出查看-->
                <div class="col-sm-8" style="padding:0 20px" ng-if="!form_control.is_database && !form_control.is_service && is_detail">
                    <table class="sub-table" style="color: #ccc">
                        <thead>
                        <tr class="cursor_default">
                            <td width="120px">
                                参数名
                            </td>
                            <td>
                                中文名
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="param in sava_data.output">
                                <td>
                                    <span ng-bind="param.param_name ? param.param_name : '--'"></span>
                                </td>
                                <td>
                                    <span ng-bind="param.param_cn_name"></span>
                                </td>
                            </tr>
                            <tr ng-if="sava_data.output.length == 0">
                                <td colspan="2" style="color: #999">暂无数据</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!--服务或数据库输出-->
                <div class="col-sm-8" style="padding:0 20px" ng-if="form_control.is_database || form_control.is_service" ng-style="{'pointer-events': is_detail ? 'none':''}">
                    <table class="sub-table" style="color: #ccc">
                        <thead>
                        <tr class="cursor_default">
                            <td width="120">
                                参数名
                            </td>
                            <td>
                                中文名
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="tr in sava_data.output">
                            <td>
                                <span ng-bind="tr.param_name ? tr.param_name : '--'"></span>
                            </td>
                            <td>
                                <span ng-if="is_detail" ng-bind="tr.param_cn_name"></span>
                                <input type="text" class="sub-form-control" ng-model="tr.param_cn_name" ng-if="!is_detail"/>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--插件列表-->
            <div class="form-group form-style" ng-if="basic_data.plugin_list.length">
                <div class="col-sm-2 text-right">
                    <label class="control-label label-key">插件列表</label>
                </div>
                <div class="col-sm-8">
                    <!--查看-->
                    <table class="sub-table table text-center" tbl-Data="sava_data.plugin_list" ng-if="is_detail">
                        <thead>
                        <tr>
                            <td  style="text-align: left;width: 170px;min-width: 170px;max-width: 170px;">插件名</td>
                            <td  width="200px" style="text-align: left">插件类型</td>
                            <td  style="text-align: left">插件描述</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr  ng-repeat="tr in sava_data.plugin_list">
                            <td>
                                <div  style="text-align: left;">
                                    <span>{{tr.plugin_name}}</span>
                                </div>
                            </td>
                            <td style="text-align: left;">
                                <span>{{getPluginTypeCnName(tr.plugin_type)}}</span>
                            </td>
                            <td style="text-align: left;max-width: 200px;overflow: hidden;white-space: nowrap">
                                <span>{{tr.plugin_bk_desc}}</span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!--编辑-->
                    <table class="sub-table table text-center" tbl-Data="sava_data.plugin_list" row-plus="addAvailablePlugin(sava_data)" ng-if="!is_detail">
                        <thead>
                        <tr>
                            <td  style="text-align: left;width: 170px;min-width: 170px;max-width: 170px;">插件名</td>
                            <td  width="200px" style="text-align: left">插件类型</td>
                            <td  style="text-align: left">插件描述</td>
                            <td style="width: 60px;text-align: left;">操作</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr  ng-repeat="tr in sava_data.plugin_list">
                            <td>
                                <div  style="text-align: left;">
                                    <bs-select
                                            width="160"
                                            name="plugin_name{{$id}}"
                                            items="basic_data.plugin_list"
                                            select-val="bindPluginInfo(selectKey,$index ,tr,sava_data)"
                                            option-key="plugin_name"
                                            option-labal="plugin_name"
                                            no-border
                                            my-select="tr.plugin_name"
                                            required
                                    ></bs-select>
                                    <validate-msg type="select" tag-cn-name="插件名" name="plugin_name{{$id}}" model="tr.plugin_name"></validate-msg>
                                </div>
                            </td>
                            <td style="text-align: left;">
                                <span>{{getPluginTypeCnName(tr.plugin_type)}}</span>
                            </td>
                            <td style="text-align: left;max-width: 200px;overflow: hidden;white-space: nowrap">
                                <span>{{tr.plugin_bk_desc}}</span>
                            </td>
                            <td style="text-align: left;">
                                <span class="fa fa-trash-o" style="cursor: pointer;padding-left: 10px;" ng-click="deleteSinglePlugin($index,sava_data)"></span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 保存按钮-->
        <div style="text-align: center ;margin-top: 30px;margin-bottom: 20px;" >
            <button class="save-cancel-btn cancel-btn btn-xl"  ng-click="formCancel()" ng-bind="is_detail ? '关闭':'取消'"></button>
            <button class="save-cancel-btn save-btn btn-xl"  ng-disabled="cmpt_info.error_message" type="submit" ng-click="formSubmit()" ng-if="!is_detail">确定</button>
        </div>
    </div>
</form>